---
name: pr-ci-fix
description: PRのCIエラー修正スキル。ビルドエラー・テスト失敗・Lint/型エラーを確認し、1つずつ順番に修正してコミットする。「CIエラー修正」「CI直して」「テスト失敗を修正」などのリクエスト時に使用。
---

# CIエラー修正

PRのCIエラーを1つずつ修正するスキル。

## ワークフロー

```
1. CIエラーの洗い出し（ビルド → テスト → Lint/型の順で優先度判断）
   ↓
2. エラーごとにTaskCreateでタスク作成（細分化して1タスク=1修正単位）
   ↓
3. タスクをin_progressに更新 → 修正方針を説明 → コード修正 → コミット → タスクをcompletedに更新
   ↓
4. 次のタスクへ（全完了まで繰り返し）
   ↓
5. サマリー報告
```

### タスク管理ルール

- **エラーの洗い出し後、修正に着手する前に全タスクを作成する**
- タスクは細かく分ける（例: 「テスト失敗3件」→ テストケースごとに3タスク）
- タスクの`subject`には具体的な修正対象を書く（例: `CIエラー修正 - UserService.tsの型エラー`）
- `activeForm`を必ず設定する（例: `UserService.tsの型エラーを修正中`）
- 修正開始時: `TaskUpdate`で`status: "in_progress"`に更新
- 修正＆コミット完了後: `TaskUpdate`で`status: "completed"`に更新
- 全タスク完了後にサマリーを報告

## 対象

- ビルドエラー
- テスト失敗
- Lint/型エラー

## 修正ルール

### 必須
- **1エラー = 1タスク = 1コミット**（まとめて修正しない）
- 修正前にエラー内容と方針を説明
- コミットメッセージに修正対象を明記
- **修正完了後は必ずTaskUpdateでタスクをcompletedにする**

### 優先順位
1. ビルドエラー（他のエラーの根本原因になりやすい）
2. テスト失敗
3. Lint/型エラー

## コミット形式

```
🐛 [Bug fix]: CIエラー修正 - {エラー内容}
```

## 完了時の報告

```
## CIエラー修正サマリー

- [x] {エラー1} → {対応内容}
- [x] {エラー2} → {対応内容}
- [x] {エラー3} → {対応内容}
```
